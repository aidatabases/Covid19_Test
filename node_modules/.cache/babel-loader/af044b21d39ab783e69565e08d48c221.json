{"ast":null,"code":"var _jsxFileName = \"/Users/deadman/Session-Management/frontend/src/views/examples/Profile.js\";\nimport React, { Component, useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\nimport { useHistory } from \"react-router-dom\";\nimport UserBio from \"./UserBio\";\n\nfunction Profile() {\n  let history = useHistory();\n  const session = Cookies.get(\"session\");\n  const useremail = Cookies.get(\"useremail\");\n  const [authenticated, changeAuth] = useState(false);\n  const [data, setData] = useState({});\n  useEffect(() => {\n    if (typeof session === \"string\") {\n      changeAuth(true);\n    } else {\n      changeAuth(false);\n      history.push(\"/login\");\n    }\n\n    getdata();\n  }, []);\n\n  function logout() {\n    Cookies.remove(\"session\");\n    history.push(\"/login\"); // const headers = {\n    //     'Access-Control-Allow-Origin':'*',\n    //     'Content-Type':'application/json',\n    // }\n\n    fetch('http://localhost:5000/profile', {\n      method: 'POST',\n      body: JSON.stringify({\n        sesid: session\n      }) // headers: headers,\n      // credentials: \"include\"\n\n    }).then(res => res.json()).then(res => console.log(res));\n  }\n\n  function getdata() {\n    // const user = {\n    //   session_id: session\n    // }\n    // const headers = {\n    //     'Access-Control-Allow-Origin':'*',\n    //     'Content-Type':'application/json',\n    // }\n    fetch('http://localhost:5000/profile', {\n      method: 'POST',\n      body: JSON.stringify({\n        sesid: session\n      }) // headers: headers,\n      // credentials: \"include\"\n\n    }).then(res => res.json()).then(res => {\n      console.log(\"profile\", res); // let d =res.data\n      // props.history.push('/')\n      //let auth = JSON.parse(res)\n      // console.log(res)\n\n      if (res.session === \"expired\") {\n        changeAuth(false);\n        window.alert(\"session exipred !pls login\");\n        history.push(\"/login\");\n      } else if (res[\"session\"] === \"active\") {\n        //changeAuth()\n        //   Cookies.set('session', res[])\n        // if(session === res[\"session-id\"]){\n        //     let temp = {\n        //         \"email\":res[\"user-email\"]\n        //     }\n        //     setData(temp)\n        //     console.log(\"temp\",temp)\n        // }else{\n        // changeAuth(false)\n        // }\n        setData(useremail);\n        changeAuth(true);\n      }\n    }).catch(err => {\n      console.log('error:-' + err);\n    });\n  }\n\n  if (!authenticated) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, \"Session expired!pls login before u accesss\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 76\n      }\n    }, \"login\"));\n  }\n\n  return data = /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 11\n    }\n  }, \" WELCOME Mr. \", data, \" \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(UserBio, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, \"Logout\"));\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/deadman/Session-Management/frontend/src/views/examples/Profile.js"],"names":["React","Component","useEffect","useState","Cookies","useHistory","UserBio","Profile","history","session","get","useremail","authenticated","changeAuth","data","setData","push","getdata","logout","remove","fetch","method","body","JSON","stringify","sesid","then","res","json","console","log","window","alert","catch","err","marginTop"],"mappings":"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","sourcesContent":["import React, { Component,useEffect,useState } from 'react'\nimport Cookies from 'js-cookie';\nimport {useHistory} from \"react-router-dom\"\nimport UserBio from \"./UserBio\"\n\nfunction Profile() {\n    let history = useHistory();\n\n    const session = Cookies.get(\"session\")\n    const useremail = Cookies.get(\"useremail\")\n\n    const [authenticated,changeAuth]= useState(false)\n    const [data,setData] = useState({})\n    useEffect(() =>{\n        if(typeof session === \"string\"){\n            changeAuth(true)\n        }\n        else{\n            changeAuth(false)\n            history.push(\"/login\")\n        }\n        getdata()\n    },[])\n\n    function logout(){\n        Cookies.remove(\"session\")\n        history.push(\"/login\")\n\n        // const headers = {\n        //     'Access-Control-Allow-Origin':'*',\n        //     'Content-Type':'application/json',\n        // }\n          fetch('http://localhost:5000/profile', {\n            method: 'POST',\n            body: JSON.stringify({sesid:session})\n            // headers: headers,\n            // credentials: \"include\"\n          })\n          .then(res=>res.json())\n          .then(res=>console.log(res))\n    }\n\n\n    function getdata() {\n        // const user = {\n        //   session_id: session\n        // }\n\n        // const headers = {\n        //     'Access-Control-Allow-Origin':'*',\n        //     'Content-Type':'application/json',\n        // }\n          fetch('http://localhost:5000/profile', {\n            method: 'POST',\n            body: JSON.stringify({sesid:session})\n            // headers: headers,\n            // credentials: \"include\"\n          })\n          .then(res=>res.json())\n          .then(res => {\n              console.log(\"profile\",res)\n                // let d =res.data\n              // props.history.push('/')\n              \n              //let auth = JSON.parse(res)\n              // console.log(res)\n              if(res.session === \"expired\"){\n                changeAuth(false)\n                window.alert(\"session exipred !pls login\")\n                history.push(\"/login\")\n              }\n              else if(res[\"session\"] === \"active\"){\n                  //changeAuth()\n                //   Cookies.set('session', res[])\n                // if(session === res[\"session-id\"]){\n\n                //     let temp = {\n                //         \"email\":res[\"user-email\"]\n                //     }\n                //     setData(temp)\n                //     console.log(\"temp\",temp)\n                // }else{\n                // changeAuth(false)\n                // }\n                setData(useremail)\n              changeAuth(true)\n              }\n\n\n          })\n          .catch(err => {\n            console.log('error:-' + err)\n          })\n    \n      }\n\n    if(!authenticated){\n        return (<><h2>Session expired!pls login before u accesss</h2><br /><a href=\"login\">login</a></>)\n    }\n\n\n    return (\n      data = \n      <div style={{marginTop:\"300px\"}}>\n          <h1> WELCOME Mr. {data} </h1>\n\n          <br /><br />\n          <UserBio /><br /><br />\n          <button onClick={logout}>Logout</button>\n          \n      </div>\n  )\n}\n\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}