{"ast":null,"code":"var _jsxFileName = \"/home/dhakad/Documents/AI/FF/Frontend_Test/src/views/examples/Profile.js\";\nimport React, { Component, useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\nimport { useHistory } from \"react-router-dom\";\nimport UserBio from \"./UserBio\";\nimport { useAuthDataContext } from '../../components/login/AuthDataProvider';\n\nfunction Profile() {\n  let history = useHistory();\n  const session = Cookies.get(\"session\");\n  const useremail = Cookies.get(\"useremail\");\n  console.log(session);\n  console.log(useremail);\n  const {\n    user,\n    onLogout\n  } = useAuthDataContext();\n  const [authenticated, changeAuth] = useState(false); // const [data,setData] = useState({})\n  // setData(useremail)\n\n  useEffect(() => {\n    if (typeof session === \"string\") {\n      changeAuth(true);\n    } else {\n      changeAuth(false);\n      history.push(\"/login\");\n    }\n\n    getdata();\n  }, []);\n\n  function logout() {\n    Cookies.remove(\"session\");\n    history.push(\"/login\"); // const headers = {\n    //     'Access-Control-Allow-Origin':'*',\n    //     'Content-Type':'application/json',\n    // }\n\n    fetch('http://localhost:5000/profile', {\n      method: 'POST',\n      body: JSON.stringify({\n        sesid: session\n      }) // headers: headers,\n      // credentials: \"include\"\n\n    }).then(res => res.json()).then(res => console.log(res));\n  }\n\n  function getdata() {\n    // const user = {\n    //   session_id: session\n    // }\n    // const headers = {\n    //     'Access-Control-Allow-Origin':'*',\n    //     'Content-Type':'application/json',\n    // }\n    fetch('http://localhost:5000/profile', {\n      method: 'POST',\n      body: JSON.stringify({\n        sesid: session\n      }) // headers: headers,\n      // credentials: \"include\"\n\n    }).then(res => res.json()).then(res => {\n      console.log(\"profile\", res); // let d =res.data\n      // props.history.push('/')\n      //let auth = JSON.parse(res)\n      // console.log(res)\n\n      if (res.session === \"expired\") {\n        changeAuth(false);\n        window.alert(\"session exipred !pls login\");\n        history.push(\"/login\");\n      } else if (res[\"session\"] === \"active\") {\n        //changeAuth()\n        //   Cookies.set('session', res[])\n        // if(session === res[\"session-id\"]){\n        //     let temp = {\n        //         \"email\":res[\"user-email\"]\n        //     }\n        //     setData(temp)\n        //     console.log(\"temp\",temp)\n        // }else{\n        // changeAuth(false)\n        // }\n        changeAuth(true);\n      }\n    }).catch(err => {\n      console.log('error:-' + err);\n    });\n  }\n\n  if (!authenticated) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 19\n      }\n    }, \"Session expired!pls login before u accesss\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 76\n      }\n    }, \"login\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"300px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, \" WELCOME Mr. \", useremail, \" \"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(UserBio, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 28\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }, \"Logout\"));\n}\n\nexport default Profile;","map":{"version":3,"sources":["/home/dhakad/Documents/AI/FF/Frontend_Test/src/views/examples/Profile.js"],"names":["React","Component","useEffect","useState","Cookies","useHistory","UserBio","useAuthDataContext","Profile","history","session","get","useremail","console","log","user","onLogout","authenticated","changeAuth","push","getdata","logout","remove","fetch","method","body","JSON","stringify","sesid","then","res","json","window","alert","catch","err","marginTop"],"mappings":"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","sourcesContent":["import React, { Component,useEffect,useState } from 'react'\nimport Cookies from 'js-cookie';\nimport {useHistory} from \"react-router-dom\"\nimport UserBio from \"./UserBio\"\nimport {useAuthDataContext} from '../../components/login/AuthDataProvider'\n\nfunction Profile() {\n    let history = useHistory();\n\n    const session = Cookies.get(\"session\")\n    const useremail = Cookies.get(\"useremail\")\n    console.log(session)\n    console.log(useremail)\n    const { user, onLogout } = useAuthDataContext();\n    const [authenticated,changeAuth]= useState(false)\n    // const [data,setData] = useState({})\n    // setData(useremail)\n    useEffect(() =>{\n        if(typeof session === \"string\"){\n            changeAuth(true)\n        }\n        else{\n            changeAuth(false)\n            history.push(\"/login\")\n        }\n        getdata()\n    },[])\n\n    function logout(){\n        Cookies.remove(\"session\")\n        history.push(\"/login\")\n\n        // const headers = {\n        //     'Access-Control-Allow-Origin':'*',\n        //     'Content-Type':'application/json',\n        // }\n          fetch('http://localhost:5000/profile', {\n            method: 'POST',\n            body: JSON.stringify({sesid:session})\n            // headers: headers,\n            // credentials: \"include\"\n          })\n          .then(res=>res.json())\n          .then(res=>console.log(res))\n    }\n\n\n    function getdata() {\n        // const user = {\n        //   session_id: session\n        // }\n\n        // const headers = {\n        //     'Access-Control-Allow-Origin':'*',\n        //     'Content-Type':'application/json',\n        // }\n          fetch('http://localhost:5000/profile', {\n            method: 'POST',\n            body: JSON.stringify({sesid:session})\n            // headers: headers,\n            // credentials: \"include\"\n          })\n          .then(res=>res.json())\n          .then(res => {\n              console.log(\"profile\",res)\n                // let d =res.data\n              // props.history.push('/')\n              \n              //let auth = JSON.parse(res)\n              // console.log(res)\n              if(res.session === \"expired\"){\n                changeAuth(false)\n                window.alert(\"session exipred !pls login\")\n                history.push(\"/login\")\n              }\n              else if(res[\"session\"] === \"active\"){\n                  //changeAuth()\n                //   Cookies.set('session', res[])\n                // if(session === res[\"session-id\"]){\n\n                //     let temp = {\n                //         \"email\":res[\"user-email\"]\n                //     }\n                //     setData(temp)\n                //     console.log(\"temp\",temp)\n                // }else{\n                // changeAuth(false)\n                // }\n                \n              changeAuth(true)\n              }\n\n\n          })\n          .catch(err => {\n            console.log('error:-' + err)\n          })\n    \n      }\n\n    if(!authenticated){\n        return (<><h2>Session expired!pls login before u accesss</h2><br /><a href=\"login\">login</a></>)\n    }\n\n\n    return (\n      <div style={{marginTop:\"300px\"}}>\n          <h1> WELCOME Mr. {useremail} </h1>\n\n          <br /><br />\n          <UserBio /><br /><br />\n          <button onClick={logout}>Logout</button>\n          \n      </div>\n  )\n}\n\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}