{"ast":null,"code":"var _jsxFileName = \"/home/dhakad/Documents/AI/Frontend_Test/src/views/examples/search.js\";\nimport React, { useEffect, useState } from 'react';\nimport Select from 'react-select';\nimport axios from 'axios';\nimport { BrowserRouter as Switch } from \"react-router-dom\";\nimport \"./search.css\";\nimport * as d3 from 'd3';\nconst query = {\n  \"aggs\": {\n    \"country_name\": {\n      \"terms\": {\n        \"field\": \"Country\",\n        \"size\": 300\n      }\n    }\n  },\n  \"size\": \"0\"\n};\nvar url = 'http://159.65.150.184:9200/hello_trade_analytica/_search';\n\nfunction Tradeaisearch({\n  variable\n}) {\n  console.log(variable);\n  const [countryname, setcountry] = useState();\n  var [path, setpath] = useState();\n  var [hscodenameselected, sethscodename] = useState();\n  const [selectedcountry] = useState();\n  const [value] = useState(); // const [selectedhsname]=useState()\n\n  const [selectedhscodename] = useState();\n  const [apidata, setdata] = useState([]); // const [hscodedata,sethscodedata]=useState([])\n\n  var [condition, setcondition] = useState([]);\n  var [hscodenamedata, sethscodenamedata] = useState([]);\n  useEffect(() => {\n    var allhscodenamequery = {\n      \"query\": {\n        \"match_all\": {}\n      },\n      \"aggs\": {\n        \"hs_code_name\": {\n          \"terms\": {\n            \"field\": \"HSCodeName\",\n            \"size\": 15000\n          }\n        }\n      },\n      \"size\": 0\n    };\n    axios.post(url, query).then(d => {\n      // console.log(d)\n      if (d.status === 200) {\n        let countries = d.data.aggregations.country_name.buckets;\n        let apidata = countries.map(c => {\n          return {\n            \"label\": c.key,\n            \"value\": c.key\n          };\n        });\n        setdata(apidata);\n      } else {\n        console.log(\"err\");\n      }\n    });\n    axios.post(url, allhscodenamequery).then(d => {\n      if (d.status === 200) {\n        let hscodename = d.data.aggregations.hs_code_name.buckets;\n        hscodename.forEach(function (v) {\n          delete v.doc_count;\n        });\n        hscodenamedata = hscodename.map(c => {\n          return {\n            \"label\": c.key.split(\"_\").join(\"\\t\"),\n            \"value\": c.key\n          };\n        }); //console.log(\"abc\",hscodenamedata)\n\n        sethscodenamedata(hscodenamedata);\n      } else {\n        console.log(\"err\");\n      }\n    }).catch(error => {\n      if (error.response.status === 404) {\n        console.log(error.response.data);\n      } else {}\n    });\n  }, [variable]);\n\n  function handlecountry(k) {\n    setcountry(k);\n    var query3 = {\n      \"query\": {\n        \"bool\": {\n          \"must\": [{\n            \"match\": {\n              \"Country\": k\n            }\n          }]\n        }\n      },\n      \"aggs\": {\n        \"hs_code_name\": {\n          \"terms\": {\n            \"field\": \"HSCodeName\",\n            \"size\": 15000\n          }\n        }\n      },\n      \"size\": 0\n    };\n    axios.post(url, query3).then(d => {\n      if (d.status === 200) {\n        let hscodename = d.data.aggregations.hs_code_name.buckets;\n        hscodename.forEach(function (v) {\n          delete v.doc_count;\n        });\n        hscodenamedata = hscodename.map(c => {\n          return {\n            \"label\": c.key.split(\"_\").join(\"\\t\"),\n            \"value\": c.key\n          };\n        }); //console.log(\"abc\",hscodenamedata)\n\n        sethscodenamedata(hscodenamedata);\n      } else {\n        console.log(\"err\");\n      }\n    }).catch(error => {\n      if (error.response.status === 404) {\n        console.log(error.response.data);\n      } else {}\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sb-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sb-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Import or Exports\",\n    value: value,\n    onChange: e => {\n      setcondition(e.value);\n      console.log(e.value);\n    },\n    options: [{\n      value: 'import',\n      label: 'Import'\n    }, {\n      value: 'export',\n      label: 'Export'\n    }],\n    theme: theme => ({ ...theme,\n      borderRadius: 0,\n      colors: { ...theme.primary50,\n        primary: 'black',\n        primary25: 'rgb(10,200,256)',\n        primary50: 'teal ',\n        primary75: 'pink ',\n        neutral20: 'black ',\n        neutral0: 'white',\n        danger: 'violet'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sb-2\",\n    style: {\n      display: variable == \"country\" || variable == \"both\" || variable == undefined ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Select Country\",\n    value: value,\n    onChange: e => {\n      handlecountry(e.label);\n      console.log(\"selected country\", e.label);\n    },\n    options: apidata,\n    theme: theme => ({ ...theme,\n      borderRadius: 0,\n      colors: { ...theme.primary50,\n        primary: 'black',\n        primary25: 'rgb(10,200,256)',\n        primary50: 'teal ',\n        primary75: 'pink ',\n        neutral20: 'black ',\n        neutral0: 'white',\n        danger: 'violet'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sb-3\",\n    style: {\n      display: variable == \"commodity\" || variable == \"both\" || variable == undefined ? \"block\" : \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    size: 10,\n    placeholder: \"Select hscodename\",\n    value: selectedhscodename,\n    onChange: e => {\n      console.log(e.label);\n      sethscodename(e.value);\n    },\n    options: hscodenamedata,\n    theme: theme => ({ ...theme,\n      borderRadius: 0,\n      colors: { ...theme.primary50,\n        primary: 'black',\n        primary25: 'rgb(10,200,256)',\n        primary50: 'teal ',\n        primary75: 'pink ',\n        neutral20: 'black ',\n        neutral0: 'white',\n        danger: 'violet'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sb-4 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    placeholder: \"Currency\",\n    value: value,\n    onChange: e => {\n      setcondition(e.value);\n      console.log(e.value);\n    },\n    options: [{\n      value: 'rupee',\n      label: '₹ Indian rupee'\n    }, {\n      value: 'dollar',\n      label: '$ USDollar'\n    }],\n    theme: theme => ({ ...theme,\n      borderRadius: 0,\n      colors: { ...theme.primary50,\n        primary: 'black',\n        primary25: 'rgb(10,200,256)',\n        primary50: 'teal ',\n        primary75: 'pink ',\n        neutral20: 'black ',\n        neutral0: 'white',\n        danger: 'violet'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"ta-search\",\n    onClick: () => {\n      if (hscodenameselected !== undefined) hscodenameselected = hscodenameselected.split('_')[0];\n      if (countryname !== undefined && hscodenameselected !== undefined) path = \"AI-TradeAnalytics/trade/\" + countryname + \"/\" + hscodenameselected;else if (countryname !== undefined && hscodenameselected === undefined) path = \"AI-TradeAnalytics/country/\" + countryname;else if (countryname === undefined && hscodenameselected !== undefined) path = \"AI-TradeAnalytics/hscode/\" + hscodenameselected;else alert(\"Select any option\");\n\n      if (path !== undefined) {\n        console.log(path, \"path\");\n        setpath(path);\n        window.location.pathname = path;\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }\n  }, \"Search\"))));\n}\n\nexport default Tradeaisearch;","map":{"version":3,"sources":["/home/dhakad/Documents/AI/Frontend_Test/src/views/examples/search.js"],"names":["React","useEffect","useState","Select","axios","BrowserRouter","Switch","d3","query","url","Tradeaisearch","variable","console","log","countryname","setcountry","path","setpath","hscodenameselected","sethscodename","selectedcountry","value","selectedhscodename","apidata","setdata","condition","setcondition","hscodenamedata","sethscodenamedata","allhscodenamequery","post","then","d","status","countries","data","aggregations","country_name","buckets","map","c","key","hscodename","hs_code_name","forEach","v","doc_count","split","join","catch","error","response","handlecountry","k","query3","e","label","theme","borderRadius","colors","primary50","primary","primary25","primary75","neutral20","neutral0","danger","display","undefined","alert","window","location","pathname"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from 'react';\nimport Select from 'react-select'; \nimport axios from 'axios'\nimport {BrowserRouter as Switch} from \"react-router-dom\";\nimport \"./search.css\"\nimport * as d3 from 'd3'\n\n\nconst query = {\"aggs\": {\"country_name\": {\"terms\": {\"field\": \"Country\",\"size\":300}}},\"size\": \"0\"}\n\nvar url ='http://159.65.150.184:9200/hello_trade_analytica/_search';\n\nfunction Tradeaisearch ({variable}) {\n    console.log(variable)\n    \n    const [countryname,setcountry]=useState()\n    var [path,setpath]=useState()\n    var [hscodenameselected,sethscodename]=useState()\n    const [selectedcountry]=useState()\n    const [value]=useState()\n    // const [selectedhsname]=useState()\n    const [selectedhscodename]=useState()\n    const [apidata,setdata]=useState([])\n    // const [hscodedata,sethscodedata]=useState([])\n    var [condition,setcondition]=useState([])\n    var [hscodenamedata,sethscodenamedata]=useState([])\n\n\n  \n\n useEffect(() => { \n  var allhscodenamequery={\n    \"query\": {\n      \"match_all\": {}\n    },\n    \"aggs\": {\n      \"hs_code_name\": {\n        \"terms\": {\n          \"field\": \"HSCodeName\",\n          \"size\": 15000\n        }\n      }\n    },\n    \"size\": 0\n  }\n    axios.post(url, query)\n\t\t.then( d => {\n      // console.log(d)\n\t\t\tif(d.status === 200 ){\n\t\t\t\t\n\t\t\t\tlet countries = d.data.aggregations.country_name.buckets ;\n\t\t\t\t\n\t\t\t\tlet apidata = countries.map(c => {return {\"label\" : c.key ,\"value\" : c.key}})\n            setdata(apidata)\n            \n\t\t\t}\n\t\t\telse{\n\t\t\t\tconsole.log(\"err\")\n\t\t\t}\n    })\n    axios.post(url, allhscodenamequery)\n  .then( d => {\n    if(d.status === 200 ){\n      \n      let hscodename = d.data.aggregations.hs_code_name.buckets ;\n      hscodename.forEach(function(v){ delete v.doc_count });\n      hscodenamedata=hscodename.map(c=>{return{\"label\":c.key.split(\"_\").join(\"\\t\"),\"value\":c.key}})\n      //console.log(\"abc\",hscodenamedata)\n      sethscodenamedata(hscodenamedata)\n      \n    }\n    else{\n      console.log(\"err\")\n    }\n  })\n  .catch( error => {\n    if (error.response.status === 404) {\n      console.log(error.response.data);}\n    else{}\n});\n}, [variable])\nfunction handlecountry(k){\n  setcountry(k)\n  var query3={\n    \"query\": {\n      \"bool\": {\n        \"must\": [\n          {\"match\": {\"Country\": k}}\n        ]\n      }\n    },\n    \"aggs\": {\n      \"hs_code_name\": {\n        \"terms\": {\n          \"field\": \"HSCodeName\",\n          \"size\" : 15000\n        }\n      }\n    },\n    \"size\": 0\n  }\n  axios.post(url, query3)\n  .then( d => {\n    if(d.status === 200 ){\n      \n      let hscodename = d.data.aggregations.hs_code_name.buckets ;\n      hscodename.forEach(function(v){ delete v.doc_count });\n      hscodenamedata=hscodename.map(c=>{return{\"label\":c.key.split(\"_\").join(\"\\t\"),\"value\":c.key}})\n      //console.log(\"abc\",hscodenamedata)\n      sethscodenamedata(hscodenamedata)\n      \n    }\n    else{\n      console.log(\"err\")\n    }\n  })\n  .catch( error => {\n    if (error.response.status === 404) {\n      console.log(error.response.data);}\n    else{}\n});\n}\n\n    return (\n      \n        <div className=\"sb-main\" >  \n        <div className= \"sb-1\">\n          <Select\n          placeholder=\"Import or Exports\"\n          value={value}\n          onChange={(e)=>{setcondition(e.value);console.log(e.value)}}\n          options={[\n            { value: 'import', label: 'Import' },\n            { value: 'export', label: 'Export' },\n          ]}\n          theme={theme => ({\n            ...theme,\n            borderRadius: 0,\n            colors: {\n              ...theme.primary50,\n              primary: 'black',\n              primary25:'rgb(10,200,256)',\n              primary50: 'teal ',\n              primary75: 'pink ',\n              neutral20: 'black ',\n              neutral0: 'white',\n              danger:'violet',\n      \n            },\n          })}\n        />\n        </div>\n        <div className= \"sb-2\" style={{display:(variable==\"country\"||variable==\"both\"||variable==undefined)?\"block\":\"none\"}}>\n        <Select\n        placeholder={\"Select Country\"}\n        value={value}\n        onChange={(e) => {handlecountry(e.label);console.log(\"selected country\",e.label)}}\n        options={apidata}\n        theme={theme => ({\n          ...theme,\n          borderRadius: 0,\n          colors: {\n            ...theme.primary50,\n            primary: 'black',\n            primary25:'rgb(10,200,256)',\n            primary50: 'teal ',\n            primary75: 'pink ',\n            neutral20: 'black ',\n            neutral0: 'white',\n            danger:'violet',\n    \n          },\n        })}\n      />\n      </div>\n      <div className= \"sb-3\" style={{display:(variable==\"commodity\"||variable==\"both\"||variable==undefined)?\"block\":\"none\"}}>\n      <Select\n        size={10}\n        placeholder=\"Select hscodename\"\n        value={selectedhscodename}\n        onChange={(e) => {console.log(e.label);sethscodename(e.value)}}\n        options={hscodenamedata}\n        theme={theme => ({\n          ...theme,\n          borderRadius: 0,\n          colors: {\n            ...theme.primary50,\n            primary: 'black',\n            primary25:'rgb(10,200,256)',\n            primary50: 'teal ',\n            primary75: 'pink ',\n            neutral20: 'black ',\n            neutral0: 'white',\n            danger:'violet',\n    \n          },\n        })}\n       /> \n      </div>\n      <div className= \"sb-4 \">\n      <Select\n          \n          placeholder=\"Currency\"\n          value={value}\n          onChange={(e)=>{setcondition(e.value);console.log(e.value)}}\n          options={[\n            { value: 'rupee', label: '₹ Indian rupee' },\n            { value:'dollar' , label: '$ USDollar'},\n          ]}\n          theme={theme => ({\n            ...theme,\n            borderRadius: 0,\n            colors: {\n              ...theme.primary50,\n              primary: 'black',\n              primary25:'rgb(10,200,256)',\n              primary50: 'teal ',\n              primary75: 'pink ',\n              neutral20: 'black ',\n              neutral0: 'white',\n              danger:'violet',\n      \n            },\n          })}\n        />\n      </div>\n      <div><Switch>\n      <button  className=\"ta-search\" onClick={()=>{\n            \n            if(hscodenameselected!==undefined)\n            hscodenameselected=hscodenameselected.split('_')[0]; \n            \n            if(countryname!==undefined&&hscodenameselected!==undefined)\n            path=\"AI-TradeAnalytics/trade/\"+countryname+\"/\"+hscodenameselected;\n            else if(countryname!==undefined&&hscodenameselected===undefined)\n            path=\"AI-TradeAnalytics/country/\"+countryname\n            else if(countryname===undefined&&hscodenameselected!==undefined)\n            path=\"AI-TradeAnalytics/hscode/\"+hscodenameselected;\n            else\n            alert(\"Select any option\")\n            \n            if(path!==undefined)\n           { console.log(path,\"path\")\n            setpath(path)\n            window.location.pathname=path}\n          }}\n            >Search</button>\n              </Switch>\n      </div>\n      \n      </div>\n    \n    )\n}\nexport default Tradeaisearch"]},"metadata":{},"sourceType":"module"}