{"ast":null,"code":"var _jsxFileName = \"/Users/deadman/Session-Management/frontend/src/components/login/login.jsx\";\nimport React, { componentDidMount } from \"react\";\nimport loginImg from \"../../login.svg\";\nimport axios from \"axios\";\nimport history from \"./history\";\nimport Cookies from 'js-cookie';\nexport class Login extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      password: '',\n      authenticated: false\n    };\n\n    this.handleSubmit = async event => {\n      event.preventDefault();\n      this.setState({\n        email: '',\n        password: ''\n      });\n      console.log(this.state);\n      axios.post('http://localhost:5000/login', this.state) //   const headers = {\n      //     'Access-Control-Allow-Origin':'*',\n      //     'Content-Type':'application/json',\n      // }\n      // fetch('http://localhost:5000/login', {\n      //   method: 'POST',\n      //   body: JSON.stringify({email:this.state.email,password:this.state.password}),\n      //   // headers: headers,\n      //   // credentials: \"include\"\n      // })\n      // .then(res=>res.json())\n      .then(res => {\n        // console.log(res)\n        res = res.data;\n\n        if (res[\"verified\"] === \"true\") {\n          const session_id = res[\"session-id\"];\n          const useremail = res[\"useremail\"];\n          console.log(\"Session ID\", session_id);\n          Cookies.set('session', session_id);\n          this.setState({\n            authenticated: true\n          });\n          history.push('/profile');\n        } else if (res[\"verified\"] === \"false\") {\n          console.log(res[\"error\"]);\n          window.alert(res[\"error\"]);\n        }\n      });\n    };\n  }\n\n  render() {\n    // if(this.state.authenticated){\n    //   return(\n    //   <div>\n    //     <h1>Logged in</h1>\n    //     <a href=\"/profile\">profile</a>\n    //   </div>\n    //   )\n    // }\n    const session = Cookies.get(\"session\");\n\n    if (typeof session === \"string\") {\n      //changeAuth(true)\n      this.setState({\n        authenticated: true\n      });\n      console.log(\"Shanmukh says hi\");\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }\n      }, \"Logged in\"), /*#__PURE__*/React.createElement(\"a\", {\n        href: \"/profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, \"profile\"));\n    } // else{\n    //   this.setState({ authenticated:false})\n    //   console.log(\"Sorry People\")\n    // }\n    else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"base-container\",\n          ref: this.props.containerRef,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"header\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 9\n          }\n        }, \"Login\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"image\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: loginImg,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"form\", {\n          method: \"POST\",\n          action: \"/Login\",\n          onSubmit: this.handleSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"forms\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          htmlFor: \"e-mail\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }\n        }, \"E-Mail\"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"text\",\n          name: \"email\",\n          value: this.state.email,\n          placeholder: \"E-Mail\",\n          onChange: event => this.setState({\n            email: event.target.value\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 15\n          }\n        })), /*#__PURE__*/React.createElement(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"forms\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          htmlFor: \"password\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 15\n          }\n        }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: this.state.password,\n          placeholder: \"password\",\n          onChange: event => this.setState({\n            password: event.target.value\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 15\n          }\n        })), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"footer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          className: \"btn\",\n          onClick: () => this.handleSubmit,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 19\n          }\n        }, \"Login\"))))));\n      }\n  }\n\n}","map":{"version":3,"sources":["/Users/deadman/Session-Management/frontend/src/components/login/login.jsx"],"names":["React","componentDidMount","axios","history","Cookies","Login","Component","state","email","password","authenticated","handleSubmit","event","preventDefault","setState","console","log","post","then","res","data","session_id","useremail","set","push","window","alert","render","session","get","props","containerRef","loginImg","target","value"],"mappings":"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","sourcesContent":["import React,{componentDidMount} from \"react\";\nimport loginImg from \"../../login.svg\";\nimport axios from \"axios\";\nimport history from\"./history\";\n\nimport Cookies from 'js-cookie';\n\nexport class Login extends React.Component {\n  \n  state = { \n    email: '',\n    password: '',\n    authenticated:false\n  };\n\n  // componentDidMount(){\n\n  // const session = Cookies.get(\"session\")\n  // if(typeof session === \"string\"){\n  //     //changeAuth(true)\n  //     this.setState({ authenticated:true})\n  //     console.log(\"Shanmukh says hi\")\n  //   }\n  //   else{\n  //     this.setState({ authenticated:false})\n  //     console.log(\"Sorry People\")\n  //   }\n\n    \n  // //   const headers = {\n  // //     'Access-Control-Allow-Origin':'*',\n  // //     'Content-Type':'application/json',\n  // // }\n\n  //   fetch('http://localhost:5000/profile', {\n  //     method: 'POST',\n  //     body: JSON.stringify({sesid:session}),\n  //     // headers: headers,\n  //     // credentials: \"include\"\n  //   })\n  //   .then(res=>res.json())\n  //   .then(res => {\n  //       console.log(\"profile\",res)\n  //       console.log(res)\n  //       if(res.session === \"expired\"){\n  //         this.setState({ authenticated:false})\n  //         //window.alert(\"session exipred !pls login\")\n  //         //history.push(\"/login\")\n  //       }\n  //       else if(res[\"session\"] === \"active\"){\n  //         if(session === res[\"session-id\"]){\n\n  //           this.setState({ authenticated:true})\n  //           history.push(\"/profile\")\n  //         }else{\n  //           this.setState({ authenticated:false})\n  //         }\n  //       }\n\n  //   })\n  //   .catch(err => {\n  //     console.log('error:-' + err)\n  //   })\n  // }\n  \n  handleSubmit = async (event) => {\n    event.preventDefault();\n    this.setState({ \n      email: '' ,\n      password: '',\n    });\n    console.log(this.state)\n    axios.post('http://localhost:5000/login', this.state)\n  //   const headers = {\n  //     'Access-Control-Allow-Origin':'*',\n  //     'Content-Type':'application/json',\n  // }\n    // fetch('http://localhost:5000/login', {\n    //   method: 'POST',\n    //   body: JSON.stringify({email:this.state.email,password:this.state.password}),\n    //   // headers: headers,\n    //   // credentials: \"include\"\n    // })\n    // .then(res=>res.json())\n    .then(res => {\n      // console.log(res)\n        res = res.data\n        if(res[\"verified\"] === \"true\"){\n        const session_id = res[\"session-id\"]\n        const useremail = res[\"useremail\"]\n        console.log(\"Session ID\",session_id)\n        Cookies.set('session', session_id)\n        this.setState({ authenticated:true})\n        history.push('/profile')\n        }\n        else if(res[\"verified\"] === \"false\"){\n          console.log(res[\"error\"])\n          window.alert(res[\"error\"])\n        }\n      \n    })\n\n  };\n  \n\n  render() {\n    // if(this.state.authenticated){\n    //   return(\n    //   <div>\n    //     <h1>Logged in</h1>\n    //     <a href=\"/profile\">profile</a>\n    //   </div>\n    //   )\n    // }\n  const session = Cookies.get(\"session\")\n  if(typeof session === \"string\"){\n      //changeAuth(true)\n      this.setState({ authenticated:true})\n      console.log(\"Shanmukh says hi\")\n      return(\n          <div>\n            <h1>Logged in</h1>\n            <a href=\"/profile\">profile</a>\n          </div>\n          )\n    }\n    // else{\n    //   this.setState({ authenticated:false})\n    //   console.log(\"Sorry People\")\n    // }\n\n    else {\n    return (\n      <div className=\"base-container\" ref={this.props.containerRef}>\n        <div className=\"header\">Login</div>\n        <div className=\"content\">\n          <div className=\"image\">\n            <img src={loginImg} />\n          </div>\n          <div className=\"form\">\n          <form method='POST' action='/Login' onSubmit={this.handleSubmit} >\n                <div className=\"forms\"> \n              <label htmlFor=\"e-mail\">E-Mail</label>\n              <input \n               type=\"text\"\n               name=\"email\"\n               value={this.state.email}\n               placeholder=\"E-Mail\"\n               onChange={event => this.setState({ email: event.target.value })}\n              />\n            </div> \n                <br/>  \n                <div className=\"forms\">\n              <label htmlFor=\"password\">Password</label>\n              <input \n               type=\"password\"\n               name=\"password\"\n               value={this.state.password}\n               placeholder=\"password\"\n               onChange={event => this.setState({ password: event.target.value })}\n              />\n            </div> \n                <div className=\"footer\">\n                  <button className=\"btn\" onClick={()=> this.handleSubmit}>\n                    Login\n                  </button>\n                </div>\n      </form>\n           \n        </div>\n        \n      </div>\n      </div>\n    );\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}