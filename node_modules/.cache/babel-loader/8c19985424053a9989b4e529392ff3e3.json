{"ast":null,"code":"var _jsxFileName = \"/home/dhakad/Documents/AI/Frontend_Test/src/views/examples/UserBio.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\nimport Cookies from 'js-cookie';\nimport { useHistory } from \"react-router-dom\";\n\nfunction UserBio() {\n  let history = useHistory();\n  const session = Cookies.get(\"session\");\n  const [Bio, setBio] = useState(\"\");\n  const [Proffession, setProffession] = useState(\"\");\n  const [authenticated, changeAuth] = useState(false);\n  const [viewDetails, setView] = useState(true);\n  const [type, setType] = useState(\"\"); // const headers = {\n  //     'Access-Control-Allow-Origin':'*',\n  //     'Content-Type':'application/json',\n  // }\n\n  useEffect(() => {\n    if (typeof session === \"string\") {\n      changeAuth(true);\n    } else {\n      changeAuth(false);\n      history.push(\"/login\");\n    }\n\n    getdata();\n  }, []);\n\n  function toggle() {\n    if (viewDetails) {\n      setView(false);\n    } else {\n      setView(true);\n    }\n\n    console.log('hi');\n  }\n\n  function getdata() {\n    fetch('http://localhost:5000/details', {\n      method: 'POST',\n      body: JSON.stringify({\n        sesid: session\n      }) // headers: headers,\n      // credentials: \"include\"\n\n    }).then(res => res.json()).then(res => {\n      console.log(\"resssss\", res);\n\n      if (res.session === \"expired\") {\n        changeAuth(false);\n        window.alert(\"session exipred !pls login\");\n        history.push(\"/login\");\n      } else if (res.data === \"true\") {\n        setBio(res.Bio);\n        setProffession(res.Profession);\n\n        if (res.Bio === \"\" && res.Profession === \"\") {\n          // type = \"insert\"\n          setType(\"insert\");\n        } else {\n          // type = \"insert\"\n          // type = \"update\"\n          setType(\"update\");\n        }\n      } else {\n        window.alert(\"error in getting user bio\");\n      }\n\n      console.log(\"errorrr2!!\", res);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  function handleSubmit(event) {\n    fetch('http://localhost:5000/adddetails', {\n      method: 'POST',\n      body: JSON.stringify({\n        sesid: session,\n        bio: Bio,\n        Profession: Proffession,\n        type: type\n      })\n    }).then(res => res.json()).then(res => {\n      if (res.session === \"expired\") {\n        changeAuth(false);\n        window.alert(\"session exipred !pls login\");\n        history.push(\"/login\");\n      } else if (res.response === \"sucefully inserted\") {\n        toggle();\n        window.alert(res.response); // console.log(\"respons\",res)\n      } else if (res.response === \"user details not found\") {\n        window.alert(res.response);\n      } else {\n        window.alert(\"error in posting user details\");\n      }\n\n      console.log(\"errorrr!!\", res);\n    }).catch(err => {\n      console.log(err);\n    });\n    event.preventDefault();\n  }\n\n  if (!authenticated) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 19\n      }\n    }, \"Session expired!pls login before u accesss\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 70\n      }\n    }), /*#__PURE__*/React.createElement(\"a\", {\n      href: \"login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 76\n      }\n    }, \"login\"));\n  }\n\n  if (viewDetails) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }\n    }, \"view details\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }\n    }, \"Bio:\", Bio), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, \"Profession:\", Proffession)), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, \"Edit\"));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, \"Change Details\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"bio\",\n      placeholder: \"Bio\",\n      value: Bio,\n      onChange: e => setBio(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 122\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"Proffession\",\n      placeholder: \"Proffesion\",\n      value: Proffession,\n      onChange: e => setProffession(e.target.value),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 153\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 159\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }\n    }, \"Edit details\")), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: toggle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, \"Cancel\"));\n  }\n}\n\nexport default UserBio;","map":{"version":3,"sources":["/home/dhakad/Documents/AI/Frontend_Test/src/views/examples/UserBio.js"],"names":["React","useEffect","useState","Link","Redirect","Cookies","useHistory","UserBio","history","session","get","Bio","setBio","Proffession","setProffession","authenticated","changeAuth","viewDetails","setView","type","setType","push","getdata","toggle","console","log","fetch","method","body","JSON","stringify","sesid","then","res","json","window","alert","data","Profession","catch","err","handleSubmit","event","bio","response","preventDefault","e","target","value"],"mappings":"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","sourcesContent":["import React,{useEffect,useState} from \"react\"\nimport { Link, Redirect } from \"react-router-dom\";\nimport Cookies from 'js-cookie';\nimport {useHistory} from \"react-router-dom\"\n\nfunction UserBio(){\n    let history = useHistory();\n    const session = Cookies.get(\"session\")\n    const [Bio,setBio] = useState(\"\")\n    const [Proffession,setProffession] = useState(\"\")\n    const [authenticated,changeAuth]= useState(false)\n    const [viewDetails,setView] = useState(true)\n    const [type,setType] = useState(\"\")\n\n    // const headers = {\n    //     'Access-Control-Allow-Origin':'*',\n    //     'Content-Type':'application/json',\n    // }\n\n    useEffect(() =>{\n      if(typeof session === \"string\"){\n          changeAuth(true)\n      } \n      else{\n          changeAuth(false)\n          history.push(\"/login\")\n      }\n      getdata()\n    },[])\n\n    function toggle(){\n        if(viewDetails){\n            setView(false)\n        }\n        else{\n            setView(true)\n        }\n        console.log('hi')\n    }\n\n\n    function getdata() {\n      \n      fetch('http://localhost:5000/details', {\n            method: 'POST',\n            body: JSON.stringify({sesid:session}),\n            // headers: headers,\n            // credentials: \"include\"\n          })\n            .then(res=> res.json())\n            .then(res => {\n                console.log(\"resssss\",res)\n                if(res.session === \"expired\"){\n                    changeAuth(false)\n                    window.alert(\"session exipred !pls login\")\n                    history.push(\"/login\")\n                  }\n                else if(res.data === \"true\"){\n                    setBio(res.Bio)\n                    setProffession(res.Profession)\n                    if(res.Bio === \"\" && res.Profession === \"\"){\n                        // type = \"insert\"\n                        setType(\"insert\")\n                    }\n                    else{\n                        // type = \"insert\"\n                        // type = \"update\"\n                        setType(\"update\")\n                    }\n                    \n                }\n                else{\n                    window.alert(\"error in getting user bio\")\n                } \n                console.log(\"errorrr2!!\",res)\n            })\n            .catch(err=>{\n                console.log(err)\n            })\n     \n    }\n\n    function handleSubmit(event) {\n        \n        \n          fetch('http://localhost:5000/adddetails', {\n            method: 'POST',\n            body: JSON.stringify({sesid:session,bio:Bio,Profession:Proffession,type:type}),\n            \n          })\n            .then(res=> res.json())\n            .then(res=> {\n                if(res.session === \"expired\"){\n                    changeAuth(false)\n                    window.alert(\"session exipred !pls login\")\n                    history.push(\"/login\")\n                  }\n                else if(res.response === \"sucefully inserted\"){\n                    toggle()\n                    window.alert(res.response)\n                    \n                // console.log(\"respons\",res)\n                }\n                else if(res.response === \"user details not found\"){\n                    window.alert(res.response)\n                }\n                else{\n                    window.alert(\"error in posting user details\")\n                }\n                console.log(\"errorrr!!\",res)\n            })\n            .catch(err=>{\n                console.log(err)\n            })\n    \n        event.preventDefault();\n      }\n    \n      if(!authenticated){\n        return (<><h2>Session expired!pls login before u accesss</h2><br /><a href=\"login\">login</a></>)\n    }\n    if(viewDetails){\n        return (\n            <div>\n                <h4>view details</h4>\n                <ul>\n                    <li>Bio:{Bio}</li>\n                    <li>Profession:{Proffession}</li>\n                </ul>\n                <button onClick={toggle}>Edit</button>\n            </div>\n        )\n    }\n    else{\n        return (\n            <div>\n                \n                <h3>Change Details</h3>\n                \n                <form  onSubmit={handleSubmit}>\n                    <input type=\"text\" name=\"bio\" placeholder=\"Bio\" value={Bio} onChange={e => setBio(e.target.value)} /><br />\n                    <input type=\"text\" name=\"Proffession\" placeholder=\"Proffesion\" value={Proffession} onChange={e => setProffession(e.target.value)} /><br /><br />\n                    <button type=\"submit\">Edit details</button>    \n                </form>\n                <button onClick={toggle}>Cancel</button>\n\n            </div>\n        )\n    }\n}\n\nexport default UserBio"]},"metadata":{},"sourceType":"module"}